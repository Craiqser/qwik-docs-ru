---
title: Qwik City и Partytown
keywords: third party scripts, google analytics, 3rd party, scripts, performance
contributors:
  - manucorporat
  - leifermendez
  - shairez
---

# Partytown

Сторонние скрипты существенно замедляют начальную загрузку страницы, блокируя основной поток.

Partytown - это инструмент, который позволяет отделить сторонние скрипты, такие как Google Analytics, Facebook Pixel и т.д., от основного потока с помощью веб-воркера.
Для получения дополнительной информации об этом инструменте смотрите документацию [Partytown](https://partytown.builder.io/).

## Использование

Вы можете легко добавить Partytown с помощью следующего стартового скрипта Qwik:

```shell
npm run qwik add partytown
```

Предыдущая команда обновляет ваше приложение и устанавливает правильную конфигурацию в файле `vite.config.ts`.

Она также добавляет новые файлы в папку `components`.

**/src/root.tsx**
```tsx
import { QwikPartytown } from './components/partytown/partytown';

export default component$(() => {
  return (
    <QwikCityProvider>
      <head>
        <meta charSet="utf-8" />
        <QwikPartytown forward={["dataLayer.push"]} />;

        <script
        async
        type="text/partytown"
        src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"
        />;

      </head>
      <body lang="en">
      </body>
    </QwikCityProvider>
  );
});
```

## Дополнительно

Для настройки дополнительных опций смотрите [Документацию Partytown](https://partytown.builder.io/configuration).
