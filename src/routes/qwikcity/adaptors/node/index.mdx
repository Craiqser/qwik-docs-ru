---
title: Qwik City - Промежуточное ПО для Node
contributors:
  - adamdbradley
---

# Промежуточное ПО для Node

Промежуточное ПО Qwik City Node позволяет подключить Qwik City к серверу Nodejs, который использует функциональность общего промежуточного ПО. Некоторые серверы Node включают:

- [Express](https://expressjs.com/)
- [Connect](https://www.npmjs.com/package/connect)
- [Polka](https://www.npmjs.com/package/polka)

Ниже приведен пример использования в приложении с [Express](https://expressjs.com/). Обратите внимание, что пользователь может сам определить порядок работы промежуточного ПО, включая обработку статических ассетов и способ обработки ответов 404.

```typescript
import { createQwikCity } from '@builder.io/qwik-city/middleware/node';
import qwikCityPlan from '@qwik-city-plan';
import render from './entry.ssr';
import express from 'express';
import { fileURLToPath } from 'node:url';
import { join } from 'node:path';

// Каталоги, в которых расположены статические ассеты
const distDir = join(fileURLToPath(import.meta.url), '..', '..', 'dist');
const buildDir = join(distDir, 'build');

// Создание Qwik City middleware
const { router, notFound } = createQwikCity({ render, qwikCityPlan });

// Создание сервера Express
const app = express();

// Использование Qwik City-роутера страниц и конечных точек
app.use(router);

// Обработчик статических ассетов
app.use(`/build`, express.static(buildDir, { immutable: true, maxAge: '1y', index: false }));
app.use(express.static(distDir, { index: false }));

// Использование Qwik City-обработчика 404 ответа
app.use(notFound);

// Запуск сервера Express
app.listen(3000);
```

- [Node Middleware Source](https://github.com/BuilderIO/qwik/tree/main/packages/qwik-city/middleware/node/index.ts)
